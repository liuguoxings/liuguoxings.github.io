<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>第二章 操作系统 进程的描述与控制 | LGX</title><meta name="keywords" content="操作系统, 进程管理, 同步机制"><meta name="author" content="LGX"><meta name="copyright" content="LGX"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#18171d"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="第二章 操作系统 进程的描述与控制"><meta name="application-name" content="第二章 操作系统 进程的描述与控制"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#18171d"><meta property="og:type" content="article"><meta property="og:title" content="第二章 操作系统 进程的描述与控制"><meta property="og:url" content="https://liuguoxings.github.io/OS/OS02/index.html"><meta property="og:site_name" content="LGX"><meta property="og:description" content="第二章  进程的描述与控制   【目的要求】  [掌握]进程的概念及其特征、进程的状态及其转换； [掌握]进程控制原语，用P、V操作解决进程同步问题； [熟悉]进程间的高级通信机制； [熟悉]消息缓冲队列机制； [了解]管程的概念； [了解]线程的概念、线程与进程的不同、线程的实现方式。    【重"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/liuguoxings/Pic@main/pics/20250810161133305.png"><meta property="article:author" content="LGX"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/liuguoxings/Pic@main/pics/20250810161133305.png"><meta name="description" content="第二章  进程的描述与控制   【目的要求】  [掌握]进程的概念及其特征、进程的状态及其转换； [掌握]进程控制原语，用P、V操作解决进程同步问题； [熟悉]进程间的高级通信机制； [熟悉]消息缓冲队列机制； [了解]管程的概念； [了解]线程的概念、线程与进程的不同、线程的实现方式。    【重"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://liuguoxings.github.io/OS/OS02/"><link rel="preconnect" href="//cdn.cbd.int"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: {"enable":true,"img":"https://upload-bbs.miyoushe.com/upload/2024/07/27/125766904/ba62475f396df9de3316a08ed9e65d86_5680958632268053399..png"},
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: {"skills":["🤖️ 数码科技爱好者","🔍 分享与热心帮助","🏠 智能家居小能手","🔨 设计开发一条龙","🤝 专修交互与设计","🏃 脚踏实地行动派","🧱 团队小组发动机","💢 壮汉人狠话不多"]},
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: LGX","link":"链接: ","source":"来源: LGX","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'LGX',
  title: '第二章 操作系统 进程的描述与控制',
  postAI: '',
  pageFillDescription: '第二章  进程的描述与控制, 2.1 前趋图和程序执行, 2.1.1 前趋图, 2.1.2 程序的顺序执行及其特征, 2.1.3 程序的并发执行及其特征, 2.2 进程的描述, 2.2.1 进程的定义和特征, 2.2.2 进程的基本状态及转换, 2.2.3 挂起操作和进程状态的转换, 2.2.4  进程管理中的数据结构, 2.3 进程控制, 2.3.1 操作系统内核, 2.3.2 进程的创建, 2.3.3 进程的终止, 2.3.4 进程的阻塞与唤醒, 2.3.5 进程的挂起与激活, 2.4 进程同步, 2.4.1 进程同步的基本概念, 2.4.2 硬件同步机制, 2.4.3 信号量机制, 2.4.4, 2.4.5 管程机制, 2.5 经典进程的同步问题, 2.5.1 生产者—消费者问题, 2.5.2 哲学家进餐问题, 2.5.3 读者-写者问题, 2.5.4 利用管程机制解决进程同步问题, 2.6 进程通信, 2.6.1 进程通信的类型, 2.6.2 消息传递通信的实现方式, 2.6.3 消息缓冲队列通信机制, 2.7  线程的基本概念, 2.7.1 线程（Threads）的引入, 2.7.2 线程与进程的比较, 2.7.3 线程的状态和线程控制块, 2.8  线程的实现, 2.8.1 线程的实现方式, 2.8.2 线程的实现, 2.8.3 线程的创建和终止, 强化第二章进程的描述与控制目的要求掌握进程的概念及其特征进程的状态及其转换掌握进程控制原语用操作解决进程同步问题熟悉进程间的高级通信机制熟悉消息缓冲队列机制了解管程的概念了解线程的概念线程与进程的不同线程的实现方式重点与难点进程的概念及其特征进程的状态及其转换信号量机制经典进程的同步问题前趋图和程序执行前趋图前趋图是一个有向无循环图记为用于描述进程之间执行的前后顺序程序的顺序执行及其特征程序的顺序执行程序顺序执行时的特征顺序性处理机严格按照程序所规定的顺序执行封闭性程序在封闭的环境下运行即程序运行时独占全机资源资源的状态只有本程序才能改变它可再现性只要程序执行时的环境和初识条件相同当程序重复执行时都可获得相同的结果程序的并发执行及其特征程序的并发执行程序并发执行时的特征间断性失去封闭性不可再现性进程的描述进程的定义和特征进程的定义较典型的进程定义有进程是程序的一次执行进程是一个程序及其数据在处理机上顺序执行时所发生的活动进程是程序在一个数据集合上运行的过程它是系统进行资源分配和调度的一个独立单位在引入了进程实体的概念后我们可以把传统中的进程定义为进程是进程实体的运行过程是系统进行资源分配和调度的一个独立单位进程的特征结构特征进程实体由程序段数据段和三部分组成动态性进程实体有一定的生命周期并发性多个进程实体同在内存在一段时间内同时运行独立性独立运行独立接受调度异步性进程按异步方式运行即按各自独立的不可预知的速度向前推进进程的基本状态及转换进程的三种基本状态就绪状态执行状态阻塞状态三种基本状态的转换创建状态和终止状态创建状态进程已经拥有了自己的但进程自身还未进入主存即创建工作尚未完成进程还不能被调度执行其所处的状态终止状态当一个进程到达了自然结束点或是出现了无法克服的错误或是被操作系统所终结或是被其它有终止权的进程所终结它将进入终止状态一旦其它进程完成了对终止状态进程的信息提取之后操作系统将删除该进程挂起操作和进程状态的转换挂起操作的引入终端用户的需要父进程请求负荷调节的需要操作系统的需要引入挂起原语操作后三个进程状态的转换引入挂起原语和激活原语后进程的状态转换增加了活动就绪静止就绪活动阻塞静止阻塞静止就绪活动就绪静止阻塞活动阻塞执行静止就绪进程管理中的数据结构操作系统中用于管理控制的数据结构表进程控制块的作用作为独立运行基本单位的标志能实现间断性运行方式提供进程管理所需要的信息提供进程调度所需要的信息实现与其它进程的同步与通信进程控制块中的信息进程标识符用于惟一地标识一个进程一个进程通常有两种标识符内部标识符在所有的操作系统中都为每一个进程赋予一个惟一的数字标识符它通常是一个进程的序号设置内部标识符主要是为了方便系统使用外部标识符它由创建者提供通常是由字母数字组成往往是由用户进程在访问该进程时使用为了描述进程的家族关系还应设置父进程标识及子进程标识此外还可设置用户标识以指示拥有该进程的用户处理机状态通用寄存器指令计数器程序状态字用户栈指针进程调度信息进程状态进程优先级进程调度所需的其它信息事件进程控制信息程序和数据的地址进程同步和通信机制资源清单链接指针进程控制块的组织方式线性方式链接方式索引方式进程控制进程控制是进程管理中最基本的功能它用于创建一个新进程终止一个已完成的进程或终止一个因出现某事件而使其无法运行下去的进程还可负责进程运行中的状态转换操作系统内核现代操作系统一般将划分为若干层次再将的不同功能分别设置在不同的层次中为了防止本身及关键数据如等遭受到应用程序有意或无意的破坏通常将处理机的执行状态分成系统态和用户态两种系统态又称为管态或内核态它具有较高的特权能执行一切指令特权指令和非特权指令访问所有寄存器和存储区传统的都在系统态运行用户态又称为目态它是具有较低特权的执行状态仅能执行规定的指令非特权指令访问指定的寄存器和存储区一般情况下应用程序只能在用户态运行大多数内核都包含了两大方面的功能支撑功能中断处理时钟管理原语操作资源管理功能进程管理存储器管理设备管理原语是由若干条指令组成的用于完成一定功能的一个过程它与一般过程的区别在于它们是原子操作所谓原子操作是指一个操作中的所有动作要么全做要么全不做换言之它是一个不可分割的基本单位因此在执行过程中不允许被中断原子操作在管态下执行常驻内存原语的作用是为了实现进程的通信和控制进程的创建进程的层次结构进程图用于描述进程家族关系的有向树引起创建进程的事件用户登录作业调度提供服务应用请求进程的创建调用原语创建申请空白新进程申请到唯一的数字标识符为新进程分配资源如内存初始化进程控制块将新进程插入就绪队列如果进程就绪队列能够接纳新进程便将新进程插入就绪队列进程的终止引起进程终止的事件正常结束异常结束越界错误保护错非法指令特权指令错运行超时等待超时算术运算错故障外界干预操作员或操作系统干预父进程请求父进程终止进程的终止过程根据被终止进程的标识符从集合中检索出该进程的从中读出该进程的状态若被终止进程正处于执行状态应立即终止该进程的执行并置调度标志为真用于指示该进程被终止后应重新进行调度若该进程还有子孙进程还应将其所有子孙进程予以终止以防他们成为不可控的进程将被终止进程所拥有的全部资源或者归还给其父进程或者归还给系统将被终止进程它的从所在队列或链表中移出等待其他程序来搜集信息进程的阻塞与唤醒引起进程阻塞和唤醒的事件向系统请求共享资源失败等待某种操作的完成新数据尚未到达等待新任务的到达如发送进程进程阻塞过程中止执行进程调用原语把自己阻塞修改状态由执行改为阻塞将插入阻塞队列最后转调度程序进行重新调度将处理机分配给另一就绪进程并进行切换进程唤醒过程进程的挂起与激活进程的挂起当出现了引起进程挂起的事件时比如用户进程请求将自己挂起或父进程请求将自己的某个子进程挂起系统将利用挂起原语将指定进程或处于阻塞状态的进程挂起挂起原语的执行过程是首先检查被挂起进程的状态若处于活动就绪状态便将其改为静止就绪对于活动阻塞状态的进程则将之改为静止阻塞为了方便用户或父进程考查该进程的运行情况而把该进程的复制到某指定的内存区域最后若被挂起的进程正在执行则转向调度程序重新调度进程的激活过程当发生激活进程的事件时例如父进程或用户进程请求激活指定进程若该进程驻留在外存而内存中已有足够的空间时则可将在外存上处于静止状态的进程换入内存这时系统将利用激活原语将指定进程激活激活原语先将进程从外存调入内存检查该进程的现行状态若是静止就绪便将之改为活动就绪若为静止阻塞便将之改为活动阻塞假如采用的是抢占调度策略则每当有新进程进入就绪队列时应检查是否要进行重新调度即由调度程序将被激活进程与当前进程进行优先级的比较如果被激活进程的优先级更低就不必重新调度否则立即剥夺当前进程的运行把处理机分配给刚被激活的进程进程同步进程同步的基本概念两种形式的制约关系间接相互制约关系也称为进程的互斥关系直接相互制约关系也称为进程的同步关系临界资源定义我们把一次仅允许一个进程访问的资源或者说不能同时共享的资源称为临界资源对临界资源的访问应该采取互斥方式生产者消费者问题临界区每个进程中访问临界资源的那段代码称为临界区同步机制应遵循的规则空闲让进忙则等待有限等待让权等待硬件同步机制关中断缺点滥用关中断权力可能导致严重后果关中断时间过长会影响系统效率限制了处理器交叉执行程序的能力关中断方法也不适合用于多系统因为在一个处理器上关中断并不能防止进程在其它处理器上执行相同的临界区代码利用指令实现互斥利用指令实现进程互斥信号量机制整型信号量记录型信号量语句的初值表示系统中某类资源的数目因而又称为资源信号量对它的每次操作意味着进程请求一个单位的该类资源因此描述为当时表示该类资源已分配完毕因此进程应调用原语进行自我阻塞放弃处理机并插入到信号量链表中对信号量的每次操作表示执行进程释放一个单位资源故操作表示资源数目加若加后仍是则表示在该信号量链表中仍有等待该资源的进程被阻塞故还应调用原语将链表中的第一个等待进程唤醒如果的初值为表示只允许一个进程访问临界资源此时的信号量转化为互斥信号量型信号量信号量集例设有个进程共享一个程序段对于如下两种情况如果每次只允许一个进程进入该程序段如果每次最多允许个进程同时进入该程序段试问所采用的信号量初值是否相同信号量值的变化范围如何例有一单向行驶的公路桥每次只允许一辆汽车通过当汽车到达桥头时若桥上无车便可上桥否则需等待直到桥上的汽车下桥为止若每一辆车为一个进程请用操作保证汽车按要求过桥例在公共汽车上司机和售票员各行其职司机负责开车和到站停车售票员负责售票和开关车门当售票员关好车门后驾驶员才能开车行驶试用操作实现司机与售票员间的同步思考题某车站售票厅任何时刻最多可容纳名购票者进入当售票厅中少于名购票者时则厅外的购票者可立即进入否则需在外面等待若把一个购票者看作一个进程请回答下列问题用操作管理这些并发进程时应怎样定义信号量写出信号量的初值以及信号量各种取值的含义若欲购票者最多为个人写出信号量可能的变化范围最大值和最小值管程机制管程的定义管程由三部分组成局部于管程的共享变量说明对该数据结构进行操作的一组过程对局部于管程的数据设置初始值的语句此外还须为管程赋予一个名字条件变量经典进程的同步问题生产者消费者问题利用记录型信号量解决生产者消费者问题注意在每个程序中用于实现互斥的和必须成对地出现对资源信号量和的和操作同样需要成对地出现但它们分别处于不同的程序中例如在计算进程中而则在打印进程中计算进程若因执行而阻塞则以后将由打印进程将它唤醒在每个程序中的多个操作顺序不能颠倒应先执行对资源信号量的操作然后再执行对互斥信号量的操作否则可能引起进程死锁利用信号量解决生产者消费者问题哲学家进餐问题问题描述有五位哲学家共用一张圆桌分别坐在周围的五张椅子上在圆桌上有五只碗和五只筷子他们的生活方式是交替地进行思考和进餐平时一个哲学家进行思考饥饿时便试图取用其左右最靠近他的筷子只有在他拿到两只筷子时才能进餐进餐完毕放下筷子继续思考利用记录型信号量解决哲学家进餐问题记录型信号量利用信号量机制解决哲学家进餐问题信号量不会死锁的哲学家进餐问题的解决方案至多允许四位哲学家同时去拿左边的筷子最终能保证至少有一位哲学家能够就餐并在用餐完毕时能释放出用过的两只筷子从而使更多的哲学家能够就餐仅当哲学家的左右两只筷子均可用时才允许他拿起筷子进餐即利用型信号量解决哲学家进餐问题规定奇数号哲学家先拿左边的筷子再拿右边的筷子而偶数号哲学家则相反读者写者问题问题描述一个数据文件或记录可被多个进程共享我们把只要求读该文件的进程称为进程其它进程则称为进程允许多个进程同时读一个共享对象因为读操作不会使数据文件混乱但不允许一个进程和其它进程或进程同时访问共享对象因为这种访问将会引起混乱所谓读者写者问题是指保证一个进程必须与其它进程互斥地访问共享对象的同步问题读者写者问题常被用来测试新同步原语利用记录型信号量解决读者写者问题为实现与进程间在读或写时的互斥需设置一个互斥信号量设置一个整型变量表示正在读的进程数目由于只要有一个进程在读便不允许进程去写因此仅当表示尚无进程在读时进程才需要执行操作若操作成功进程便可去读相应地做操作同理仅当进程在执行了减操作后其值为时才须执行操作以便让进程写因为是一个可被多个进程访问的临界资源因此应该为它设置一个互斥信号量利用信号量集机制解决读者写者问题例桌上有一空盘只允许放入一个水果爸爸专向盘中放苹果妈妈专向盘中放桔子女儿专等着吃盘中的苹果儿子专等着吃盘中的桔子试用原语实现爸爸妈妈儿子和女儿间能同步的算法例有一阅览室共有个座位读者进入时必须先在一张登记表上登记该表为每一座位列一表目包括座号和姓名读者离开时要注销掉登记内容试用某一种语言或类语言和操作描述读者进程的同步机构利用管程机制解决进程同步问题利用管程解决生产者消费者问题利用管程解决哲学家就餐问题进程通信进程通信是指进程之间的信息交换进程之间的互斥和同步由于其所交换的信息量少而被归结为低级通信能传送大量数据的通信方式称为高级通信进程通信的类型共享存储器系统基于共享数据结构的通信方式如生产者消费者问题中的缓冲池基于共享存储区的通信方式管道通信系统所谓管道是指用于连接一个读进程和一个写进程以实现他们之间通信的一个共享文件又名文件管道机制必须提供以下三方面的协调能力互斥即当一个进程正在对执行读写操作时其它另一进程必须等待同步指当写输入进程把一定数量如的数据写入便去睡眠等待直到读输出进程取走数据后再把他唤醒当读进程读一空时也应睡眠等待直至写进程将数据写入管道后才将之唤醒确定对方是否存在只有确定了对方已存在时才能进行通信消息传递系统又因其实现方式的不同而进一步分成直接通信方式和间接通信方式两种客户机服务器系统套接字基于文件型基于网络型远程过程调用和远程方法调用消息传递通信的实现方式直接消息传递系统直接通信原语对称寻址方式非对称寻址方式消息的格式进程同步方式发送进程阻塞接收进程阻塞汇合发送进程不阻塞接收进程阻塞发送进程和接收进程均不阻塞通信链路连接方法点点多点连接链路通信方式单向通信链路双向链路间接通信方式信箱通信信箱的结构信箱定义为一种数据结构在逻辑上可以将其分为两个部分信箱头用以存放有关信箱的描述信息如信箱标识符信箱的拥有者信箱口令信箱的空格数等信箱体由若干个可以存放消息或消息头的信箱格组成信箱格的数目以及每格的大小是在创建信箱时确定的信箱通信原语信箱的创建和撤消消息的发送和接收信箱的类型私用信箱由用户进程创建公用信箱由操作系统创建共享信箱由某进程创建发送进程和接受进程的关系一对一关系多对一关系一对多关系多对多关系消息缓冲队列通信机制消息缓冲队列通信机制中的数据结构消息缓冲区在消息缓冲队列通信方式中主要利用的数据结构是消息缓冲区中有关通信的数据项在利用消息缓冲队列通信机制时在设置消息缓冲队列的同时还应增加用于对消息队列进行操作和实现同步的信号量并将它们置入进程的中发送原语接收原语线程的基本概念线程的引入进程的两个基本属性进程是一个可拥有资源的独立单位也是一个可独立调度和分派的基本单位程序并发执行所需付出的时空开销创建进程进程切换撤消进程线程作为调度和分派的基本单位线程与进程的比较调度的基本单位并发性拥有资源独立性系统开销创建撤销切换支持多处理机系统线程的状态和线程控制块线程运行的三个状态执行状态表示线程正获得处理机而运行就绪状态指线程已具备了各种执行条件一旦获得便可执行的状态阻塞状态指线程在执行中因某事件而受阻处于暂停执行时的状态线程控制块线程标识符一组寄存器它包括程序计数器和堆栈指针中的内容线程运行状态用于描述线程正处于何种运行状态优先级描述线程执行的优先程度线程专有存储器用于保存线程自己的局部变量拷贝信号屏蔽即对某些信号加以屏蔽堆栈指针在堆栈中通常保存有局部变量和返回地址多线程中的进程属性进程是一个可拥有资源的基本单位多个线程可并发执行进程已不是可执行的实体线程的实现线程的实现方式内核支持线程优点在多处理机系统中一个进程中的多个线程可并行执行如果一个线程阻塞了内核可以调度该进程中的另一个线程或其它进程中的一个线程执行内核支持线程切换较快开销小内核支持线程本身也可以采用多线程技术缺点其模式切换的开销较大用户级线程优点线程切换不需要转换到内核空间调度算法可以是进程专用的用户级线程的实现与平台无关缺点系统调用的阻塞问题在单纯的用户级线程方式中内核每次分配给一个进程一个因此进程中仅有一个线程能执行组合方式三种不同的模型多对一模型一对一模型多对多模型线程的实现内核支持线程的实现用户级线程的实现两种方式运行时系统内核控制线程线程的创建和终止线程的创建线程的终止一种是在线程完成了自己的工作后自愿退出另一种是线程在运行中出现错误或由于某种原因而被其它线程强行终止某寺庙有小和尚老和尚若干有一水缸由小和尚提水入缸供老和尚饮用水缸可容桶水水取自同一井中水井径窄每次只能容一个桶取水水桶总数为个每次入取缸水仅为桶且不可同时进行试给出有关取水入水的算法描述假设有一个成品仓库总共能放台成品生产者进程生产产品放入仓库消费者进程从仓库中取出成品消费为了防止积压仓库满的时候就停止生产由于仓库搬运设备只有一套故成品的存入和取出只能分别执行使用操作来实现该方案强化例试从物理概念上说明记录型信号量和的含义每次的操作意味着进程请求分配该类资源的一个单位资源相反执行一次操作意味着进程释放相应资源的一个单位资源当时表示某类可用资源的数量当时表示该类资源正好分配完无进程等待当时表示该类资源已分配完若有进程请求该类资源则被阻塞其绝对值等于等待该类资源的进程数例设有个进程共享一个程序段对于如下两种情况如果每次只允许一个进程进入该程序段如果每次最多允许个进程同时进入该程序段例有一单向行驶的公路桥每次只允许一辆汽车通过当汽车到达桥头时若桥上无车便可上桥否则需等待直到桥上的汽车下桥为止若每一辆车为一个进程请用操作保证汽车按要求过桥例在公共汽车上司机和售票员各行其职司机负责开车和到站停车售票员负责售票和开关车门当售票员关好车门后驾驶员才能开车行驶汽车在正常行驶的过程中售票员售票试用操作实现司机与售票员间的同步例某车站售票厅任何时刻最多可容纳名购票者进入当售票厅中少于名购票者时则厅外的购票者可立即进入否则需在外面等待若把一个购票者看作一个进程请回答下列问题用操作管理这些并发进程时应怎样定义信号量写出信号量的初值以及信号量各种取值的含义若欲购票者最多为个人写出信号量可能的变化范围最大值和最小值例有两个并发进程这两个进程共用一个缓冲区其大小为每次存放一个数据将数据存放入将数据从中取出在将缓冲区中的上一个数据取走之前不能放入新数据缓冲区初始化时为空试用操作实现这两个进程间的同步并写出程序描述例桌上有一空盘允许存放一只水果爸爸可向盘中放苹果也可向盘中放桔子儿子专等吃盘中的桔子女儿专等吃盘中的苹果规定当盘空时一次只能放一只水果供吃者取用请用原语实现爸爸儿子女儿三个并发进程的同步例三个进程互斥使用一个包含个单元的缓冲区每次用生成一个正整数并用送入缓冲区某一空单元中每次用从该缓冲区中取出一个奇数并用统计奇数个数每次用从该缓冲区中取出一个偶数并用统计偶数个数请用信号量机制实现这三个进程的同步与互斥活动并说明所定义信号量的含义要求用伪代码描述',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-08-10 16:40:57',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://cdn.jsdelivr.net/gh/Nightliuguoxing/Pic@main/pics/avatar.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" accesskey="h"><div class="title">LGX</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a><div id="he-plugin-simple"></div><script>var WIDGET = {
  "CONFIG": {
    "modules": "0124",
    "background": "2",
    "tmpColor": "FFFFFF",
    "tmpSize": "16",
    "cityColor": "FFFFFF",
    "citySize": "16",
    "aqiColor": "E8D87B",
    "aqiSize": "16",
    "weatherIconSize": "24",
    "alertIconSize": "18",
    "padding": "10px 10px 10px 10px",
    "shadow": "0",
    "language": "auto",
    "borderRadius": "20",
    "fixed": "true",
    "vertical": "top",
    "horizontal": "left",
    "left": "20",
    "top": "7.1",
    "key": "df245676fb434a0691ead1c63341cd94"
  }
}
</script><link rel="stylesheet" href="https://widget.qweather.net/simple/static/css/he-simple.css?v=1.4.0"/><script src="https://widget.qweather.net/simple/static/js/he-simple.js?v=1.4.0"></script></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="微信" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/AOP/" style="font-size: 1.05rem;">AOP<sup>1</sup></a><a href="/tags/Go%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/" style="font-size: 1.05rem;">Go基础教程<sup>5</sup></a><a href="/tags/Machine-Learning/" style="font-size: 1.05rem;">Machine Learning<sup>63</sup></a><a href="/tags/Matlab/" style="font-size: 1.05rem;">Matlab<sup>5</sup></a><a href="/tags/MongoDB/" style="font-size: 1.05rem;">MongoDB<sup>1</sup></a><a href="/tags/Python%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/" style="font-size: 1.05rem;">Python基础教程<sup>4</sup></a><a href="/tags/Redis/" style="font-size: 1.05rem;">Redis<sup>1</sup></a><a href="/tags/SpringCache/" style="font-size: 1.05rem;">SpringCache<sup>1</sup></a><a href="/tags/YOLO/" style="font-size: 1.05rem;">YOLO<sup>1</sup></a><a href="/tags/%E4%BB%A3%E7%A0%81/" style="font-size: 1.05rem;">代码<sup>11</sup></a><a href="/tags/%E5%AE%9E%E9%AA%8C/" style="font-size: 1.05rem;">实验<sup>7</sup></a><a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" style="font-size: 1.05rem;">操作系统<sup>7</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 1.05rem;">数据结构<sup>11</sup></a><a href="/tags/%E6%97%A5%E5%BF%97%E5%88%87%E9%9D%A2/" style="font-size: 1.05rem;">日志切面<sup>1</sup></a><a href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" style="font-size: 1.05rem;">深度学习<sup>1</sup></a><a href="/tags/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B/" style="font-size: 1.05rem;">目标检测<sup>1</sup></a><a href="/tags/%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B/" style="font-size: 1.05rem;">系列教程<sup>5</sup></a><a href="/tags/%E7%BC%93%E5%AD%98%E6%B3%A8%E8%A7%A3/" style="font-size: 1.05rem;">缓存注解<sup>1</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/" style="font-size: 1.05rem;">计算机组成原理<sup>4</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" style="font-size: 1.05rem;">计算机网络<sup>3</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/08/"><span class="card-archive-list-date">八月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/07/"><span class="card-archive-list-date">七月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">81</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/06/"><span class="card-archive-list-date">六月 2021</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/05/"><span class="card-archive-list-date">五月 2021</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">9</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/04/"><span class="card-archive-list-date">四月 2021</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/12/"><span class="card-archive-list-date">十二月 2020</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">8</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/11/"><span class="card-archive-list-date">十一月 2020</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">6</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" itemprop="url">操作系统</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>操作系统</span></a></span></div></div><h1 class="post-title" itemprop="name headline">第二章 操作系统 进程的描述与控制</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2021-05-08T16:00:00.000Z" title="发表于 2021-05-09 00:00:00">2021-05-09</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-08-10T08:40:57.590Z" title="更新于 2025-08-10 16:40:57">2025-08-10</time></span></div><div class="meta-secondline"><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为山东-济南"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>山东-济南</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://cdn.jsdelivr.net/gh/liuguoxings/Pic@main/pics/20250810161133305.png"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://liuguoxings.github.io/OS/OS02/"><header><a class="post-meta-categories" href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" itemprop="url">操作系统</a><a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" tabindex="-1" itemprop="url">操作系统</a><h1 id="CrawlerTitle" itemprop="name headline">第二章 操作系统 进程的描述与控制</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">LGX</span><time itemprop="dateCreated datePublished" datetime="2021-05-08T16:00:00.000Z" title="发表于 2021-05-09 00:00:00">2021-05-09</time><time itemprop="dateCreated datePublished" datetime="2025-08-10T08:40:57.590Z" title="更新于 2025-08-10 16:40:57">2025-08-10</time></header><h2 id="第二章-进程的描述与控制">第二章  进程的描述与控制</h2>
<ul>
<li>
<p>【目的要求】</p>
<ol>
<li>[掌握]进程的概念及其特征、进程的状态及其转换；</li>
<li>[掌握]进程控制原语，用P、V操作解决进程同步问题；</li>
<li>[熟悉]进程间的高级通信机制；</li>
<li>[熟悉]消息缓冲队列机制；</li>
<li>[了解]管程的概念；</li>
<li>[了解]线程的概念、线程与进程的不同、线程的实现方式。</li>
</ol>
</li>
<li>
<p>【重点与难点】</p>
<ol>
<li>进程的概念及其特征；</li>
<li>进程的状态及其转换；</li>
<li>信号量机制；</li>
<li>经典进程的同步问题。</li>
</ol>
</li>
</ul>
<hr>
<h2 id="2-1-前趋图和程序执行">2.1 前趋图和程序执行</h2>
<h4 id="2-1-1-前趋图">2.1.1 前趋图</h4>
<p>前趋图(Precedence Graph)是一个有向无循环图，记为DAG(Directed Acyclic Graph)，用于描述进程之间执行的前后顺序</p>
<h4 id="2-1-2-程序的顺序执行及其特征">2.1.2 程序的顺序执行及其特征</h4>
<ol>
<li>程序的顺序执行</li>
<li>程序顺序执行时的特征
<ul>
<li>顺序性：处理机严格按照程序所规定的顺序执行。</li>
<li>封闭性：程序在封闭的环境下运行，即程序运行时独占全机资源，资源的状态只有本程序才能改变它。</li>
<li>可再现性：只要程序执行时的环境和初识条件相同，当程序重复执行时，都可获得相同的结果。</li>
</ul>
</li>
</ol>
<h4 id="2-1-3-程序的并发执行及其特征">2.1.3 程序的并发执行及其特征</h4>
<ol>
<li>程序的并发执行<br>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/Nightliuguoxing/Pic@main/image/os/1619512671099-OS2131.jpg" alt="并发执行时的前趋图"></li>
<li>程序并发执行时的特征
<ul>
<li>间断性</li>
<li>失去封闭性</li>
<li>不可再现性</li>
</ul>
</li>
</ol>
<h2 id="2-2-进程的描述">2.2 进程的描述</h2>
<h4 id="2-2-1-进程的定义和特征">2.2.1 进程的定义和特征</h4>
<ol>
<li>
<p>进程的定义</p>
<ul>
<li>较典型的进程定义有：
<ul>
<li>进程是程序的一次执行。</li>
<li>进程是一个程序及其数据在处理机上顺序执行时所发生的活动。</li>
<li>进程是程序在一个数据集合上运行的过程，它是系统进行资源分配和调度的一个独立单位。</li>
</ul>
</li>
<li>在引入了进程实体的概念后，我们可以把传统OS中的进程定义为：“<code>进程是进程实体的运行过程，是系统进行资源分配和调度的一个独立单位</code>”。</li>
</ul>
</li>
<li>
<p>进程的特征</p>
<ul>
<li>结构特征：进程实体由程序段、数据段和PCB三部分组成。</li>
<li>动态性：进程实体有一定的生命周期。</li>
<li>并发性：多个进程实体同在内存，在一段时间内同时运行。</li>
<li>独立性：独立运行、独立接受调度 。</li>
<li>异步性：进程按异步方式运行，即按各自独立的、不可预知的速度向前推进。</li>
</ul>
</li>
</ol>
<h4 id="2-2-2-进程的基本状态及转换">2.2.2 进程的基本状态及转换</h4>
<ol>
<li>
<p>进程的三种基本状态</p>
<ul>
<li>就绪(Ready)状态</li>
<li>执行(Running)状态</li>
<li>阻塞(Block)状态</li>
</ul>
</li>
<li>
<p>三种基本状态的转换<br>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/Nightliuguoxing/Pic@main/image/os/1619512732529-OS2222.jpg" alt="进程的三种基本状态及其转换"></p>
</li>
<li>
<p>创建状态和终止状态</p>
<ul>
<li>创建状态：进程已经拥有了自己的PCB，但进程自身还未进入主存，即创建工作尚未完成，进程还不能被调度执行，其所处的状态。</li>
<li>终止状态：当一个进程到达了自然结束点，或是出现了无法克服的错误，或是被操作系统所终结，或是被其它有终止权的进程所终结，它将进入终止状态。一旦其它进程完成了对终止状态进程的信息提取之后，操作系统将删除该进程。</li>
</ul>
</li>
</ol>
<h4 id="2-2-3-挂起操作和进程状态的转换">2.2.3 挂起操作和进程状态的转换</h4>
<ol>
<li>
<p>挂起操作的引入</p>
<ul>
<li>终端用户的需要</li>
<li>父进程请求</li>
<li>负荷调节的需要</li>
<li>操作系统的需要</li>
</ul>
</li>
<li>
<p>引入挂起原语操作后三个进程状态的转换: 引入挂起原语Suspend和激活原语Active后，进程的状态转换增加了</p>
<ul>
<li>活动就绪 -&gt; 静止就绪</li>
<li>活动阻塞 -&gt; 静止阻塞</li>
<li>静止就绪 -&gt; 活动就绪</li>
<li>静止阻塞 -&gt; 活动阻塞</li>
<li>执行 -&gt; 静止就绪</li>
<li><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/Nightliuguoxing/Pic@main/image/os/1619512771153-OS2232.jpg" alt="具有挂起状态的进程状态图"></li>
</ul>
</li>
</ol>
<h4 id="2-2-4-进程管理中的数据结构">2.2.4  进程管理中的数据结构</h4>
<ol>
<li>
<p>操作系统中用于管理控制的数据结构：表</p>
</li>
<li>
<p>进程控制块PCB的作用</p>
<ul>
<li>作为独立运行基本单位的标志</li>
<li>能实现间断性运行方式</li>
<li>提供进程管理所需要的信息</li>
<li>提供进程调度所需要的信息</li>
<li>实现与其它进程的同步与通信</li>
</ul>
</li>
<li>
<p>进程控制块中的信息</p>
<ul>
<li>进程标识符: 用于惟一地标识一个进程。一个进程通常有两种标识符：
<ul>
<li>内部标识符。在所有的操作系统中，都为每一个进        程赋予一个惟一的数字标识符，它通常是一个进程的序号。 设置内部标识符主要是为了方便系统使用。</li>
<li>外部标识符。它由创建者提供，通常是由字母、数字组成，往往是由用户(进程)在访问该进程时使用。为了描述进程的家族关系，还应设置父进程标识及子进程标识。此外，还可设置用户标识，以指示拥有该进程的用户。</li>
</ul>
</li>
<li>处理机状态
<ul>
<li>通用寄存器</li>
<li>指令计数器</li>
<li>程序状态字PSW</li>
<li>用户栈指针</li>
</ul>
</li>
<li>进程调度信息
<ul>
<li><code>进程状态</code></li>
<li><code>进程优先级</code></li>
<li><code>进程调度所需的其它信息</code></li>
<li><code>事件</code></li>
</ul>
</li>
<li>进程控制信息
<ul>
<li>程序和数据的地址</li>
<li>进程同步和通信机制</li>
<li>资源清单</li>
<li>链接指针</li>
</ul>
</li>
</ul>
</li>
<li>
<p>进程控制块的组织方式</p>
<ul>
<li>线性方式</li>
<li>链接方式</li>
<li>索引方式</li>
</ul>
</li>
</ol>
<h2 id="2-3-进程控制">2.3 进程控制</h2>
<hr>
<p>进程控制是进程管理中最基本的功能。它用于创建一个新进程，终止一个已完成的进程，或终止一个因出现某事件而使其无法运行下去的进程，还可负责进程运行中的状态转换。</p>
<hr>
<h4 id="2-3-1-操作系统内核">2.3.1 操作系统内核</h4>
<p>现代操作系统一般将OS划分为若干层次，再将OS的不同功能分别设置在不同的层次中。为了防止OS本身及关键数据（如PCB等）遭受到应用程序有意或无意的破坏，通常将处理机的执行状态分成系统态和用户态两种：</p>
<ul>
<li>系统态：又称为管态或内核态。它具有较高的特权，能执行一切指令（特权指令和非特权指令），访问所有寄存器和存储区，传统的OS都在系统态运行。</li>
<li>用户态：又称为目态。它是具有较低特权的执行状态，仅能执行规定的指令（非特权指令），访问指定的寄存器和存储区。一般情况下，应用程序只能在用户态运行。</li>
</ul>
<p>大多数OS内核都包含了两大方面的功能：</p>
<ol>
<li>支撑功能
<ul>
<li>中断处理</li>
<li>时钟管理</li>
<li>原语操作</li>
</ul>
</li>
<li>资源管理功能
<ul>
<li>进程管理</li>
<li>存储器管理</li>
<li>设备管理</li>
</ul>
</li>
</ol>
<hr>
<ul>
<li>原语是由若干条指令组成的，用于完成一定功能的一个过程。</li>
<li>它与一般过程的区别在于：它们是“原子操作（Atomic Operation）”所谓原子操作，是指一个操作中的所有动作要么全做，要么全不做。换言之，它是一个不可分割的基本单位，因此，在执行过程中不允许被中断。原子操作在管态下执行，常驻内存。</li>
<li>原语的作用是为了实现进程的通信和控制。</li>
</ul>
<hr>
<h4 id="2-3-2-进程的创建">2.3.2 进程的创建</h4>
<ol>
<li>进程的层次结构</li>
<li>进程图(Process Graph): 用于描述进程家族关系的有向树。</li>
<li>引起创建进程的事件
<ul>
<li>用户登录</li>
<li>作业调度</li>
<li>提供服务</li>
<li>应用请求</li>
</ul>
</li>
<li>进程的创建(Creation of Progress): OS调用Creat( )原语创建
<ul>
<li>申请空白PCB（新进程申请到唯一的数字标识符）。</li>
<li>为新进程分配资源（如内存）。</li>
<li>初始化进程控制块。</li>
<li>将新进程插入就绪队列。如果进程就绪队列能够接纳新进程，便将新进程插入就绪队列。</li>
</ul>
</li>
</ol>
<h4 id="2-3-3-进程的终止">2.3.3 进程的终止</h4>
<ol>
<li>
<p>引起进程终止(Termination of Process)的事件</p>
<ul>
<li>正常结束</li>
<li>异常结束
<ul>
<li>越界错误</li>
<li>保护错</li>
<li>非法指令</li>
<li>特权指令错</li>
<li>运行超时</li>
<li>等待超时</li>
<li>算术运算错</li>
<li>I/O故障</li>
</ul>
</li>
<li>外界干预
<ul>
<li>操作员或操作系统干预</li>
<li>父进程请求</li>
<li>父进程终止</li>
</ul>
</li>
</ul>
</li>
<li>
<p>进程的终止过程</p>
<ol>
<li>根据被终止进程的标识符，从PCB集合中检索出该进程的PCB，从中读出该进程的状态。</li>
<li>若被终止进程正处于执行状态，应立即终止该进程的执行，并置调度标志为真，用于指示该进程被终止后应重新进行调度。</li>
<li>若该进程还有子孙进程，还应将其所有子孙进程予以终止，以防他们成为不可控的进程。</li>
<li>将被终止进程所拥有的全部资源，或者归还给其父进程，或者归还给系统。</li>
<li>将被终止进程（它的PCB）从所在队列（或链表）中移出，等待其他程序来搜集信息。</li>
</ol>
</li>
</ol>
<h4 id="2-3-4-进程的阻塞与唤醒">2.3.4 进程的阻塞与唤醒</h4>
<ol>
<li>引起进程阻塞和唤醒的事件
<ul>
<li>向系统请求共享资源失败</li>
<li>等待某种（I/O）操作的完成</li>
<li>新数据尚未到达</li>
<li>等待新任务的到达 如：发送进程</li>
</ul>
</li>
<li>进程阻塞过程
<ol>
<li>中止执行，进程调用block( )原语把自己阻塞：</li>
<li>修改状态：由“执行”改为阻塞；</li>
<li>将PCB插入阻塞队列；</li>
<li>最后，转调度程序进行重新调度，将处理机分配给另一就绪进程，并进行切换。</li>
</ol>
</li>
<li>进程唤醒过程</li>
</ol>
<h4 id="2-3-5-进程的挂起与激活">2.3.5 进程的挂起与激活</h4>
<ol>
<li>进程的挂起
<ul>
<li>当出现了引起进程挂起的事件时，比如，用户进程请求将自己挂起，或父进程请求将自己的某个子进程挂起，系统将利用挂起原语suspend( )将指定进程或处于阻塞状态的进程挂起。</li>
<li>挂起原语的执行过程是
<ol>
<li>首先检查被挂起进程的状态，若处于活动就绪状态，便将其改为静止就绪；对于活动阻塞状态的进程，则将之改为静止阻塞。</li>
<li>为了方便用户或父进程考查该进程的运行情况而把该进程的PCB复制到某指定的内存区域。</li>
<li>最后，若被挂起的进程正在执行，则转向调度程序重新调度。</li>
</ol>
</li>
</ul>
</li>
<li>进程的激活过程
<ul>
<li>当发生激活进程的事件时，例如，父进程或用户进程请求激活指定进程，若该进程驻留在外存而内存中已有足够的空间时，则可将在外存上处于静止状态的进程换入内存。这时，系统将利用激活原语active( )将指定进程激活。激活原语先将进程从外存调入内存，检查该进程的现行状态，若是静止就绪，便将之改为活动就绪；若为静止阻塞便将之改为活动阻塞。</li>
<li>假如采用的是<code>抢占调度策略</code>，则每当有新进程进入就绪队列时，应<code>检查是否要进行重新调度</code>，即由调度程序将被激活进程与当前进程进行优先级的比较，如果被激活进程的优先级更低，就不必重新调度；否则，立即剥夺当前进程的运行，把处理机分配给刚被激活的进程。</li>
</ul>
</li>
</ol>
<h2 id="2-4-进程同步">2.4 进程同步</h2>
<h4 id="2-4-1-进程同步的基本概念">2.4.1 进程同步的基本概念</h4>
<ol>
<li>
<p>两种形式的制约关系</p>
<ul>
<li>间接相互制约关系，也称为进程的互斥关系。</li>
<li>直接相互制约关系，也称为进程的同步关系。</li>
</ul>
</li>
<li>
<p>临界资源(Critical Resouce)</p>
<ol>
<li>定义：我们把一次仅允许一个进程访问的资源，或者说不能同时共享的资源称为临界资源。对<code>临界资源</code>的访问应该采取<code>互斥方式</code>。</li>
<li>生产者-消费者(producer-consumer)问题</li>
<li>临界区(critical section): 每个进程中访问临界资源的那段代码称为<code>临界区</code></li>
<li>同步机制应遵循的规则❗❗❗
<ul>
<li>空闲让进</li>
<li>忙则等待</li>
<li>有限等待</li>
<li>让权等待</li>
</ul>
</li>
</ol>
</li>
</ol>
<h4 id="2-4-2-硬件同步机制">2.4.2 硬件同步机制</h4>
<ol>
<li>关中断<br>
[缺点]：
<ul>
<li>滥用关中断权力可能导致严重后果；</li>
<li>关中断时间过长，会影响系统效率，限制了处理器交叉执行程序的能力；</li>
<li>关中断方法也不适合用于多CPU系统，因为在一个处理器上关中断并不能防止进程在其它处理器上执行相同的临界区代码。</li>
</ul>
</li>
<li>利用Test-and-Set指令实现互斥</li>
<li>利用Swap指令实现进程互斥</li>
</ol>
<h4 id="2-4-3-信号量机制">2.4.3 信号量机制</h4>
<ol>
<li>整型信号量</li>
<li>记录型信号量
<ul>
<li>语句</li>
</ul>
 <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>&#123;</span></span><br><span class="line">    <span class="type">int</span> value;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">process_control_block</span>*<span class="title">list</span>;</span></span><br><span class="line">&#125;semaphore;</span><br><span class="line"></span><br><span class="line">wait(semaphore*S)&#123;</span><br><span class="line">    S-&gt;value--;</span><br><span class="line">    <span class="keyword">if</span>(S-&gt;value＜<span class="number">0</span>)  block(S-&gt;<span class="built_in">list</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">signal(semaphore*S)&#123;</span><br><span class="line">    S-&gt;value++;</span><br><span class="line">    <span class="keyword">if</span>(S-&gt;value&lt;=<span class="number">0</span>)  wakeup(S-&gt;<span class="built_in">list</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>S-&gt;value的初值表示系统中某类资源的数目，因而又称为资源信号量</li>
<li>对它的每次wait操作，意味着进程请求一个单位的该类资源，因此描述为S-&gt;value–;</li>
<li>当S-&gt;value&lt;0时，表示该类资源已分配完毕，因此进程应调用block原语，进行自我阻塞，放弃处理机，并插入到信号量链表S-&gt;list中</li>
<li>对信号量的每次signal操作，表示执行进程释放一个单位资源，故S-&gt;value++操作表示资源数目加1</li>
<li>若加1后仍是S-&gt;value&lt;=0，则表示在该信号量链表中，仍有等待该资源的进程被阻塞，故还应调用wakeup原语，将S-&gt;list链表中的第一个等待进程唤醒</li>
<li>如果S-&gt;value的初值为1，表示只允许一个进程访问临界资源，此时的信号量转化为互斥信号量</li>
</ul>
</li>
<li>AND型信号量</li>
<li>信号量集</li>
</ol>
<hr>
<p>例1：设有n个进程共享一个程序段，对于如下两种情况：<br>
- 如果每次只允许一个进程进入该程序段；<br>
- 如果每次最多允许m个进程（m＜n）同时进入该程序段；<br>
试问：所采用的信号量初值是否相同？信号量值的变化范围如何？</p>
<hr>
<p>例2：<br>
有一单向行驶的公路桥，每次只允许一辆汽车通过。<br>
当汽车到达桥头时，若桥上无车，便可上桥；否则需等待，直到桥上的汽车下桥为止。<br>
若每一辆车为一个进程，请用P、V操作保证汽车按要求过桥。</p>
<hr>
<p>例3：在公共汽车上，司机和售票员各行其职，司机负责开车和到站停车;<br>
售票员负责售票和开、关车门，当售票员关好车门后，驾驶员才能开车行驶。<br>
试用P、V操作实现司机与售票员间的同步。</p>
<hr>
<p>思考题：某车站售票厅，任何时刻最多可容纳20名购票者进入，当售票厅中少于20名购票者时，则厅外的购票者可立即进入，否则需在外面等待。<br>
若把一个购票者看作一个进程，请回答下列问题：</p>
<ul>
<li>用P、V操作管理这些并发进程时，应怎样定义信号量，写出信号量的初值以及信号量各种取值的含义。</li>
<li>若欲购票者最多为n个人，写出信号量可能的变化范围(最大值和最小值)。</li>
</ul>
<hr>
<h4 id="2-4-4">2.4.4</h4>
<h4 id="2-4-5-管程机制">2.4.5 管程机制</h4>
<ol>
<li>管程的定义 : 管程由三部分组成
<ul>
<li>局部于管程的共享变量说明</li>
<li>对该数据结构进行操作的一组过程</li>
<li>对局部于管程的数据设置初始值的语句</li>
<li>此外，还须为管程赋予一个名字</li>
<li><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/Nightliuguoxing/Pic@main/image/os/1619512931934-OS2451.jpg" alt="管程的示意图"></li>
</ul>
</li>
<li>条件变量</li>
</ol>
<h2 id="2-5-经典进程的同步问题">2.5 经典进程的同步问题</h2>
<h4 id="2-5-1-生产者—消费者问题">2.5.1 生产者—消费者问题</h4>
<ol>
<li>
<p>利用记录型信号量解决生产者—消费者问题</p>
<hr>
<p>注意：</p>
<ul>
<li>在每个程序中用于实现互斥的wait(mutex)和signal(mutex)必须成对地出现；</li>
<li>对资源信号量empty和full的wait和signal操作，同样需要成对地出现，但它们分别处于不同的程序中。例如，wait(empty)在计算进程中，而signal(empty)则在打印进程中，计算进程若因执行wait(empty)而阻塞，则以后将由打印进程将它唤醒；</li>
<li>在每个程序中的多个wait操作顺序不能颠倒。应先执行对资源信号量的wait操作，然后再执行对互斥信号量的wait操作，否则可能引起进程死锁。</li>
</ul>
<hr>
</li>
<li>
<p>利用AND信号量解决生产者—消费者问题</p>
</li>
</ol>
<h4 id="2-5-2-哲学家进餐问题">2.5.2 哲学家进餐问题</h4>
<div class="note default simple"><p><code>问题描述</code>：<br>
有五位哲学家共用一张圆桌，分别坐在周围的五张椅子上，在圆桌上有五只碗和五只筷子，他们的生活方式是交替地进行思考和进餐。平时，一个哲学家进行思考，饥饿时便试图取用其左右最靠近他的筷子，只有在他拿到两只筷子时才能进餐。进餐完毕，放下筷子继续思考。</p>
</div>
<ol>
<li>
<p>利用记录型信号量解决哲学家进餐问题</p>
<ul>
<li>记录型信号量</li>
</ul>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">semaphore chopstick[5]=&#123;1,1,1,1,1&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>利用AND信号量机制解决哲学家进餐问题</p>
<ul>
<li>AND信号量</li>
</ul>
 <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">semaphore chopstick[<span class="number">5</span>]=&#123;<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>&#125;;</span><br><span class="line">processi()&#123;</span><br><span class="line"><span class="keyword">do</span>&#123;</span><br><span class="line">    think;</span><br><span class="line">    Sswait(chopstick［(i+<span class="number">1</span>) % <span class="number">5</span>］, chopstick ［i］);</span><br><span class="line">    eat;</span><br><span class="line">    Ssignal(chopstick ［(i+<span class="number">1</span>) % <span class="number">5</span>］, chopstick ［i］);</span><br><span class="line">&#125;<span class="keyword">while</span>(TRUE); </span><br></pre></td></tr></table></figure>
</li>
<li>
<p>不会死锁的哲学家进餐问题的解决方案</p>
<ul>
<li>至多允许四位哲学家同时去拿左边的筷子，最终能保证至少有一位哲学家能够就餐，并在用餐完毕时能释放出用过的两只筷子，从而使更多的哲学家能够就餐</li>
<li>仅当哲学家的左右两只筷子均可用时，才允许他拿起筷子进餐。即利用AND型信号量解决哲学家进餐问题</li>
<li>规定奇数号哲学家先拿左边的筷子，再拿右边的筷子；而偶数号哲学家则相反</li>
</ul>
</li>
</ol>
<h4 id="2-5-3-读者-写者问题">2.5.3 读者-写者问题</h4>
<hr>
<p>问题描述：一个数据文件或记录，可被多个进程共享，我们把只要求读该文件的进程称为“Reader进程”，其它进程则称为“Writer进程”。允许多个进程同时读一个共享对象，因为读操作不会使数据文件混乱。但不允许一个Writer进程和其它Reader进程或Writer进程同时访问共享对象，因为这种访问将会引起混乱。所谓“读者-写者问题（Reader-Writer Problem）”是指保证一个Writer进程必须与其它进程互斥地访问共享对象的同步问题。读者-写者问题常被用来测试新同步原语</p>
<hr>
<ol>
<li>
<p>利用记录型信号量解决读者-写者问题</p>
<ul>
<li>为实现Reader与Writer进程间在读或写时的互斥需设置一个互斥信号量wmutex</li>
<li>设置一个整型变量Readcount表示正在读的进程数目。由于只要有一个Reader进程在读，便不允许Writer进程去写。因此，仅当Readcount=0, 表示尚无Reader进程在读时，Reader进程才需要执行Wait(wmutex)操作。若wait(wmutex)操作成功，Reader进程便可去读，相应地，做Readcount+1操作。同理，仅当Reader进程在执行了Readcount减1操作后其值为0时，才须执行signal(wmutex)操作，以便让Writer进程写</li>
<li>因为Readcount是一个可被多个Reader进程访问的临界资源，因此，应该为它设置一个互斥信号量rmutex</li>
</ul>
</li>
<li>
<p>利用信号量集机制解决读者-写者问题</p>
</li>
</ol>
<hr>
<p>例1: 桌上有一空盘，只允许放入一个水果。<br>
爸爸专向盘中放苹果，妈妈专向盘中放桔子。<br>
女儿专等着吃盘中的苹果，儿子专等着吃盘中的桔子。<br>
试用P、V原语实现爸爸、妈妈、儿子和女儿间能同步的算法</p>
<hr>
<p>例2: 有一阅览室，共有100个座位，<br>
读者进入时必须先在一张登记表上登记，该表为每一座位列一表目，包括座号和姓名。<br>
读者离开时要注销掉登记内容。<br>
试用某一种语言（或类语言）和P、V操作描述读者进程的同步机构</p>
<hr>
<h4 id="2-5-4-利用管程机制解决进程同步问题">2.5.4 利用管程机制解决进程同步问题</h4>
<ol>
<li>利用管程解决生产者-消费者问题</li>
<li>利用管程解决哲学家就餐问题：</li>
</ol>
<h2 id="2-6-进程通信">2.6 进程通信</h2>
<hr>
<p>进程通信，是指进程之间的信息交换。进程之间的互斥和同步，由于其所交换的信息量少而被归结为低级通信。能传送大量数据的通信方式称为高级通信</p>
<hr>
<h4 id="2-6-1-进程通信的类型">2.6.1 进程通信的类型</h4>
<ol>
<li>
<p>共享存储器系统(Shared-Memory System)</p>
<ul>
<li>基于共享数据结构的通信方式: 如生产者-消费者问题中的缓冲池buffer</li>
<li>基于共享存储区的通信方式</li>
</ul>
</li>
<li>
<p>管道(Pipe)通信系统</p>
<ul>
<li>所谓“管道”，是指用于连接一个读进程和一个写进程以实现他们之间通信的一个共享文件，又名pipe文件</li>
<li>管道机制必须提供以下三方面的协调能力
<ul>
<li>互斥，即当一个进程正在对pipe执行读/写操作时，其它(另一)进程必须等待。</li>
<li>同步，指当写(输入)进程把一定数量(如4 KB)的数据写入pipe，便去睡眠等待，直到读(输出)进程取走数据后，再把他唤醒。当读进程读一空pipe时，也应睡眠等待，直至写进程将数据写入管道后，才将之唤醒。</li>
<li>确定对方是否存在，只有确定了对方已存在时，才能进行通信。</li>
</ul>
</li>
</ul>
</li>
<li>
<p>消息传递系统(Message passing system)</p>
<ul>
<li>又因其实现方式的不同而进一步分成直接通信方式和间接通信方式两种</li>
</ul>
</li>
<li>
<p>客户机-服务器系统(Client-Server  system)</p>
<ul>
<li>套接字
<ul>
<li>基于文件型</li>
<li>基于网络型</li>
</ul>
</li>
<li>远程过程调用和远程方法调用</li>
</ul>
</li>
</ol>
<h4 id="2-6-2-消息传递通信的实现方式">2.6.2 消息传递通信的实现方式</h4>
<ol>
<li>
<p>直接消息传递系统</p>
<ul>
<li>直接通信原语
<ul>
<li>对称寻址方式</li>
<li>非对称寻址方式</li>
</ul>
</li>
<li>消息的格式</li>
<li>进程同步方式
<ul>
<li>发送进程阻塞、 接收进程阻塞（汇合）</li>
<li>发送进程不阻塞、 接收进程阻塞</li>
<li>发送进程和接收进程均不阻塞</li>
</ul>
</li>
<li>通信链路(communication link)
<ul>
<li>连接方法
<ul>
<li>点—点</li>
<li>多点连接链路</li>
</ul>
</li>
<li>通信方式
<ul>
<li>单向通信链路</li>
<li>双向链路</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>间接通信方式 （信箱通信）</p>
<ul>
<li>信箱的结构
<ul>
<li>信箱定义为一种数据结构。在逻辑上可以将其分为两个部分：</li>
<li>信箱头：用以存放有关信箱的描述信息，如信箱标识符、信箱的拥有者、信箱口令、信箱的空格数等。</li>
<li>信箱体：由若干个可以存放消息（或消息头）的信箱格组成，信箱格的数目以及每格的大小是在创建信箱时确定的。</li>
</ul>
</li>
<li>信箱通信原语
<ul>
<li>信箱的创建和撤消</li>
<li>消息的发送和接收</li>
</ul>
</li>
<li>信箱的类型
<ul>
<li>私用信箱: 由用户进程创建</li>
<li>公用信箱: 由操作系统创建</li>
<li>共享信箱: 由某进程创建</li>
</ul>
</li>
<li>发送进程和接受进程的关系
<ul>
<li>一对一关系</li>
<li>多对一关系</li>
<li>一对多关系</li>
<li>多对多关系</li>
</ul>
</li>
</ul>
</li>
</ol>
<h4 id="2-6-3-消息缓冲队列通信机制">2.6.3 消息缓冲队列通信机制</h4>
<ol>
<li>消息缓冲队列通信机制中的数据结构
<ul>
<li>消息缓冲区。在消息缓冲队列通信方式中，主要利用的数据结构是消息缓冲区</li>
<li>PCB中有关通信的数据项。在利用消息缓冲队列通信机制时，在设置消息缓冲队列的同时，还应增加用于对消息队列进行操作和实现同步的信号量，并将它们置入进程的PCB中</li>
</ul>
</li>
<li>发送原语
<ul>
<li><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/Nightliuguoxing/Pic@main/image/os/1619513034225-OS2632.jpg" alt="消息缓冲通信"></li>
</ul>
</li>
<li>接收原语</li>
</ol>
<h2 id="2-7-线程的基本概念">2.7  线程的基本概念</h2>
<h4 id="2-7-1-线程（Threads）的引入">2.7.1 线程（Threads）的引入</h4>
<ol>
<li>进程的两个基本属性
<ul>
<li>进程是一个可拥有资源的独立单位，也是一个可独立调度和分派的基本单位。</li>
</ul>
</li>
<li>程序并发执行所需付出的时空开销
<ul>
<li>创建进程</li>
<li>进程切换</li>
<li>撤消进程</li>
</ul>
</li>
<li>线程-作为调度和分派的基本单位</li>
</ol>
<h4 id="2-7-2-线程与进程的比较">2.7.2 线程与进程的比较</h4>
<ol>
<li>调度的基本单位</li>
<li>并发性</li>
<li>拥有资源</li>
<li>独立性</li>
<li>系统开销：创建、撤销、切换</li>
<li>支持多处理机系统</li>
</ol>
<h4 id="2-7-3-线程的状态和线程控制块">2.7.3 线程的状态和线程控制块</h4>
<ol>
<li>线程运行的三个状态
<ul>
<li>执行状态，表示线程正获得处理机而运行；</li>
<li>就绪状态，指线程已具备了各种执行条件，一旦获得CPU便可执行的状态；</li>
<li>阻塞状态，指线程在执行中因某事件而受阻，处于暂停执行时的状态。</li>
</ul>
</li>
<li>线程控制块
<ul>
<li>线程标识符</li>
<li>一组寄存器，它包括程序计数器PC和堆栈指针中的内容</li>
<li>线程运行状态，用于描述线程正处于何种运行状态</li>
<li>优先级，描述线程执行的优先程度</li>
<li>线程专有存储器，用于保存线程自己的局部变量拷贝</li>
<li>信号屏蔽，即对某些信号加以屏蔽</li>
<li>堆栈指针，在堆栈中通常保存有局部变量和返回地址</li>
</ul>
</li>
<li>多线程OS中的进程属性
<ul>
<li>进程是一个可拥有资源的基本单位</li>
<li>多个线程可并发执行</li>
<li>进程已不是可执行的实体</li>
</ul>
</li>
</ol>
<h2 id="2-8-线程的实现">2.8  线程的实现</h2>
<h4 id="2-8-1-线程的实现方式">2.8.1 线程的实现方式</h4>
<ol>
<li>内核支持线程KST(Kernel Supported Threads)
<ul>
<li>优点
<ul>
<li>在多处理机系统中，一个进程中的多个线程可并行执行</li>
<li>如果一个线程阻塞了，内核可以调度该进程中的另一个线程或其它进程中的一个线程执行</li>
<li>内核支持线程切换较快，开销小</li>
<li>内核支持线程本身也可以采用多线程技术</li>
</ul>
</li>
<li>缺点
<ul>
<li>其模式切换的开销较大</li>
</ul>
</li>
</ul>
</li>
<li>用户级线程
<ul>
<li>优点
<ul>
<li>线程切换不需要转换到内核空间</li>
<li>调度算法可以是进程专用的</li>
<li>用户级线程的实现与OS平台无关</li>
</ul>
</li>
<li>缺点
<ul>
<li>系统调用的阻塞问题</li>
<li>在单纯的用户级线程方式中，内核每次分配给一个进程一个CPU，因此进程中仅有一个线程能执行</li>
</ul>
</li>
</ul>
</li>
<li>组合方式
<ul>
<li>三种不同的模型
<ul>
<li>多对一模型</li>
<li>一对一模型</li>
<li>多对多模型</li>
</ul>
</li>
</ul>
</li>
</ol>
<h4 id="2-8-2-线程的实现">2.8.2 线程的实现</h4>
<ol>
<li>内核支持线程的实现</li>
<li>用户级线程的实现（两种方式）
<ul>
<li>运行时系统(Runtime System)</li>
<li>内核控制线程</li>
</ul>
</li>
</ol>
<h4 id="2-8-3-线程的创建和终止">2.8.3 线程的创建和终止</h4>
<ol>
<li>线程的创建</li>
<li>线程的终止
<ul>
<li>一种是在线程完成了自己的工作后自愿退出</li>
<li>另一种是线程在运行中出现错误或由于某种原因而被其它线程强行终止</li>
</ul>
</li>
</ol>
<hr>
<p>某寺庙，有小和尚、老和尚若干。<br>
有一水缸，由小和尚提水入缸供老和尚饮用。<br>
水缸可容10桶水，水取自同一井中。水井径窄，每次只能容一个桶取水。<br>
水桶总数为3个。<br>
每次入、取缸水仅为1桶，且不可同时进行。<br>
试给出有关取水、入水的算法描述.</p>
<hr>
<p>假设有一个成品仓库，总共能放8台成品，生产者进程生产产品放入仓库，消费者进程从仓库中取出成品消费。<br>
为了防止积压，仓库满的时候就停止生产。<br>
由于仓库搬运设备只有一套，故成品的存入和取出只能分别执行，<br>
使用P、V操作来实现该方案</p>
<hr>
<h2 id="强化">强化</h2>
<hr>
<p>例1: 试从物理概念上说明记录型信号量wait和signal的含义<br>
- 每次的wait(s)操作，意味着进程请求分配该类资源的一个单位资源。相反，执行一次signal(s) 操作意味着进程释放相应资源的一个单位资源。<br>
- 当s.value&gt;0时，表示某类可用资源的数量；<br>
- 当s.value=0时，表示该类资源正好分配完，无进程等待；<br>
- 当s.value&lt;0时，表示该类资源已分配完。若有进程请求该类资源，则被阻塞，其绝对值等于等待该类资源的进程数。</p>
<hr>
<p>例2: 设有n个进程共享一个程序段，对于如下两种情况：</p>
<ul>
<li>如果每次只允许一个进程进入该程序段；</li>
<li>如果每次最多允许m个进程（m＜n）同时进入该程序段；</li>
</ul>
<hr>
<p>例3: 有一单向行驶的公路桥，每次只允许一辆汽车通过。当汽车到达桥头时，若桥上无车，便可上桥；否则需等待，直到桥上的汽车下桥为止。若每一辆车为一个进程，请用P、V操作保证汽车按要求过桥。</p>
<hr>
<p>例4: 在公共汽车上，司机和售票员各行其职，司机负责开车和到站停车；售票员负责售票和开、关车门，当售票员关好车门后，驾驶员才能开车行驶。汽车在正常行驶的过程中售票员售票。试用P、V操作实现司机与售票员间的同步。</p>
<hr>
<p>例5: 某车站售票厅，任何时刻最多可容纳20名购票者进入，当售票厅中少于20名购票者时，则厅外的购票者可立即进入，否则需在外面等待。若把一个购票者看作一个进程，请回答下列问题：</p>
<ul>
<li>用P、V操作管理这些并发进程时，应怎样定义信号量，写出信号量的初值以及信号量各种取值的含义。</li>
<li>若欲购票者最多为n个人，写出信号量可能的变化范围(最大值和最小值)。</li>
</ul>
<hr>
<p>例6: 有两个并发进程put、get，这两个进程共用一个缓冲区S（其大小为每次存放一个数据），put将数据存放入S，get将数据从S中取出。在将缓冲区中的上一个数据取走之前不能放入新数据，缓冲区初始化时为空。<br>
试用P,V操作实现这两个进程间的同步，并写出程序描述。</p>
<hr>
<p>例7: 桌上有一空盘，允许存放一只水果。爸爸可向盘中放苹果，也可向盘中放桔子，儿子专等吃盘中的桔子，女儿专等吃盘中的苹果。 规定:当盘空时一次只能放一只水果供吃者取用。<br>
请用P、V原语实现爸爸、儿子、女儿三个并发进程的同步。</p>
<hr>
<p>例8: 三个进程P1、P2、P3互斥使用一个包含N(N&gt;0)个单元的缓冲区。P1每次用produce()生成一个正整数并用put()送入缓冲区某一空单元中；P2每次用getodd()从该缓冲区中取出一个奇数并用countodd()统计奇数个数；P3每次用geteven()从该缓冲区中取出一个偶数并用counteven()统计偶数个数。请用信号量机制实现这三个进程的同步与互斥活动，并说明所定义信号量的含义。要求用伪代码描述。</p>
<hr>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/Nightliuguoxing/Pic@main/pics/avatar.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/Nightliuguoxing/Pic@main/pics/avatar.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">LGX</div><div class="post-copyright__author_desc"></div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://liuguoxings.github.io/OS/OS02/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://liuguoxings.github.io/OS/OS02/')">第二章 操作系统 进程的描述与控制</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://liuguoxings.github.io/OS/OS02/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=第二章 操作系统 进程的描述与控制&amp;url=https://liuguoxings.github.io/OS/OS02/&amp;pic=https://cdn.jsdelivr.net/gh/liuguoxings/Pic@main/pics/20250810161133305.png" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://liuguoxings.github.io" target="_blank">LGX</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>操作系统<span class="tagsPageCount">7</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/liuguoxings/Pic@main/pics/20250805153725905.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/OS/OS01/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/liuguoxings/Pic@main/pics/20250810161133305.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">第一章 操作系统 操作系统引论</div></div></a></div><div class="next-post pull-right"><a href="/OS/OP/OSOP2/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/liuguoxings/Pic@main/pics/20250810161133305.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">操作系统 实验 - OP2</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/OS/OS00/" title="操作系统 学习大纲"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/liuguoxings/Pic@main/pics/20250810161133305.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2021-05-03</div><div class="title">操作系统 学习大纲</div></div></a></div><div><a href="/OS/OS01/" title="第一章 操作系统 操作系统引论"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/liuguoxings/Pic@main/pics/20250810161133305.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2021-05-06</div><div class="title">第一章 操作系统 操作系统引论</div></div></a></div><div><a href="/OS/OS03/" title="第三章 操作系统 处理机调度与死锁"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/liuguoxings/Pic@main/pics/20250810161133305.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2021-05-12</div><div class="title">第三章 操作系统 处理机调度与死锁</div></div></a></div><div><a href="/OS/OS04/" title="第四章 操作系统 存储器管理"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/liuguoxings/Pic@main/pics/20250810161133305.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2021-05-15</div><div class="title">第四章 操作系统 存储器管理</div></div></a></div><div><a href="/OS/OP/OSOP1/" title="操作系统 实验 - OP1"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/liuguoxings/Pic@main/pics/20250810161133305.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2021-04-28</div><div class="title">操作系统 实验 - OP1</div></div></a></div><div><a href="/OS/OP/OSOP2/" title="操作系统 实验 - OP2"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/liuguoxings/Pic@main/pics/20250810161133305.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2021-05-12</div><div class="title">操作系统 实验 - OP2</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/Nightliuguoxing/Pic@main/pics/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/24/64e6ce9c507bb.png" alt="status"/></div></div><div class="author-info__description">非淡泊无以明志，非宁静无以致远。</div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">LGX</h1><div class="author-info__desc"></div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/liuguoxings" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E8%BF%9B%E7%A8%8B%E7%9A%84%E6%8F%8F%E8%BF%B0%E4%B8%8E%E6%8E%A7%E5%88%B6"><span class="toc-number">1.</span> <span class="toc-text">第二章  进程的描述与控制</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E5%89%8D%E8%B6%8B%E5%9B%BE%E5%92%8C%E7%A8%8B%E5%BA%8F%E6%89%A7%E8%A1%8C"><span class="toc-number">2.</span> <span class="toc-text">2.1 前趋图和程序执行</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-1-%E5%89%8D%E8%B6%8B%E5%9B%BE"><span class="toc-number">2.0.1.</span> <span class="toc-text">2.1.1 前趋图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-2-%E7%A8%8B%E5%BA%8F%E7%9A%84%E9%A1%BA%E5%BA%8F%E6%89%A7%E8%A1%8C%E5%8F%8A%E5%85%B6%E7%89%B9%E5%BE%81"><span class="toc-number">2.0.2.</span> <span class="toc-text">2.1.2 程序的顺序执行及其特征</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-3-%E7%A8%8B%E5%BA%8F%E7%9A%84%E5%B9%B6%E5%8F%91%E6%89%A7%E8%A1%8C%E5%8F%8A%E5%85%B6%E7%89%B9%E5%BE%81"><span class="toc-number">2.0.3.</span> <span class="toc-text">2.1.3 程序的并发执行及其特征</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E8%BF%9B%E7%A8%8B%E7%9A%84%E6%8F%8F%E8%BF%B0"><span class="toc-number">3.</span> <span class="toc-text">2.2 进程的描述</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-1-%E8%BF%9B%E7%A8%8B%E7%9A%84%E5%AE%9A%E4%B9%89%E5%92%8C%E7%89%B9%E5%BE%81"><span class="toc-number">3.0.1.</span> <span class="toc-text">2.2.1 进程的定义和特征</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-2-%E8%BF%9B%E7%A8%8B%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%8A%B6%E6%80%81%E5%8F%8A%E8%BD%AC%E6%8D%A2"><span class="toc-number">3.0.2.</span> <span class="toc-text">2.2.2 进程的基本状态及转换</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-3-%E6%8C%82%E8%B5%B7%E6%93%8D%E4%BD%9C%E5%92%8C%E8%BF%9B%E7%A8%8B%E7%8A%B6%E6%80%81%E7%9A%84%E8%BD%AC%E6%8D%A2"><span class="toc-number">3.0.3.</span> <span class="toc-text">2.2.3 挂起操作和进程状态的转换</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-4-%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-number">3.0.4.</span> <span class="toc-text">2.2.4  进程管理中的数据结构</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-%E8%BF%9B%E7%A8%8B%E6%8E%A7%E5%88%B6"><span class="toc-number">4.</span> <span class="toc-text">2.3 进程控制</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-1-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%86%85%E6%A0%B8"><span class="toc-number">4.0.1.</span> <span class="toc-text">2.3.1 操作系统内核</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-2-%E8%BF%9B%E7%A8%8B%E7%9A%84%E5%88%9B%E5%BB%BA"><span class="toc-number">4.0.2.</span> <span class="toc-text">2.3.2 进程的创建</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-3-%E8%BF%9B%E7%A8%8B%E7%9A%84%E7%BB%88%E6%AD%A2"><span class="toc-number">4.0.3.</span> <span class="toc-text">2.3.3 进程的终止</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-4-%E8%BF%9B%E7%A8%8B%E7%9A%84%E9%98%BB%E5%A1%9E%E4%B8%8E%E5%94%A4%E9%86%92"><span class="toc-number">4.0.4.</span> <span class="toc-text">2.3.4 进程的阻塞与唤醒</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-5-%E8%BF%9B%E7%A8%8B%E7%9A%84%E6%8C%82%E8%B5%B7%E4%B8%8E%E6%BF%80%E6%B4%BB"><span class="toc-number">4.0.5.</span> <span class="toc-text">2.3.5 进程的挂起与激活</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-%E8%BF%9B%E7%A8%8B%E5%90%8C%E6%AD%A5"><span class="toc-number">5.</span> <span class="toc-text">2.4 进程同步</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-1-%E8%BF%9B%E7%A8%8B%E5%90%8C%E6%AD%A5%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">5.0.1.</span> <span class="toc-text">2.4.1 进程同步的基本概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-2-%E7%A1%AC%E4%BB%B6%E5%90%8C%E6%AD%A5%E6%9C%BA%E5%88%B6"><span class="toc-number">5.0.2.</span> <span class="toc-text">2.4.2 硬件同步机制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-3-%E4%BF%A1%E5%8F%B7%E9%87%8F%E6%9C%BA%E5%88%B6"><span class="toc-number">5.0.3.</span> <span class="toc-text">2.4.3 信号量机制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-4"><span class="toc-number">5.0.4.</span> <span class="toc-text">2.4.4</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-5-%E7%AE%A1%E7%A8%8B%E6%9C%BA%E5%88%B6"><span class="toc-number">5.0.5.</span> <span class="toc-text">2.4.5 管程机制</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-5-%E7%BB%8F%E5%85%B8%E8%BF%9B%E7%A8%8B%E7%9A%84%E5%90%8C%E6%AD%A5%E9%97%AE%E9%A2%98"><span class="toc-number">6.</span> <span class="toc-text">2.5 经典进程的同步问题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-5-1-%E7%94%9F%E4%BA%A7%E8%80%85%E2%80%94%E6%B6%88%E8%B4%B9%E8%80%85%E9%97%AE%E9%A2%98"><span class="toc-number">6.0.1.</span> <span class="toc-text">2.5.1 生产者—消费者问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-5-2-%E5%93%B2%E5%AD%A6%E5%AE%B6%E8%BF%9B%E9%A4%90%E9%97%AE%E9%A2%98"><span class="toc-number">6.0.2.</span> <span class="toc-text">2.5.2 哲学家进餐问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-5-3-%E8%AF%BB%E8%80%85-%E5%86%99%E8%80%85%E9%97%AE%E9%A2%98"><span class="toc-number">6.0.3.</span> <span class="toc-text">2.5.3 读者-写者问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-5-4-%E5%88%A9%E7%94%A8%E7%AE%A1%E7%A8%8B%E6%9C%BA%E5%88%B6%E8%A7%A3%E5%86%B3%E8%BF%9B%E7%A8%8B%E5%90%8C%E6%AD%A5%E9%97%AE%E9%A2%98"><span class="toc-number">6.0.4.</span> <span class="toc-text">2.5.4 利用管程机制解决进程同步问题</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-6-%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1"><span class="toc-number">7.</span> <span class="toc-text">2.6 进程通信</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-6-1-%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1%E7%9A%84%E7%B1%BB%E5%9E%8B"><span class="toc-number">7.0.1.</span> <span class="toc-text">2.6.1 进程通信的类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-6-2-%E6%B6%88%E6%81%AF%E4%BC%A0%E9%80%92%E9%80%9A%E4%BF%A1%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F"><span class="toc-number">7.0.2.</span> <span class="toc-text">2.6.2 消息传递通信的实现方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-6-3-%E6%B6%88%E6%81%AF%E7%BC%93%E5%86%B2%E9%98%9F%E5%88%97%E9%80%9A%E4%BF%A1%E6%9C%BA%E5%88%B6"><span class="toc-number">7.0.3.</span> <span class="toc-text">2.6.3 消息缓冲队列通信机制</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-7-%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">8.</span> <span class="toc-text">2.7  线程的基本概念</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-7-1-%E7%BA%BF%E7%A8%8B%EF%BC%88Threads%EF%BC%89%E7%9A%84%E5%BC%95%E5%85%A5"><span class="toc-number">8.0.1.</span> <span class="toc-text">2.7.1 线程（Threads）的引入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-7-2-%E7%BA%BF%E7%A8%8B%E4%B8%8E%E8%BF%9B%E7%A8%8B%E7%9A%84%E6%AF%94%E8%BE%83"><span class="toc-number">8.0.2.</span> <span class="toc-text">2.7.2 线程与进程的比较</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-7-3-%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%8A%B6%E6%80%81%E5%92%8C%E7%BA%BF%E7%A8%8B%E6%8E%A7%E5%88%B6%E5%9D%97"><span class="toc-number">8.0.3.</span> <span class="toc-text">2.7.3 线程的状态和线程控制块</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-8-%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="toc-number">9.</span> <span class="toc-text">2.8  线程的实现</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-8-1-%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F"><span class="toc-number">9.0.1.</span> <span class="toc-text">2.8.1 线程的实现方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-8-2-%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="toc-number">9.0.2.</span> <span class="toc-text">2.8.2 线程的实现</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-8-3-%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%88%9B%E5%BB%BA%E5%92%8C%E7%BB%88%E6%AD%A2"><span class="toc-number">9.0.3.</span> <span class="toc-text">2.8.3 线程的创建和终止</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%BA%E5%8C%96"><span class="toc-number">10.</span> <span class="toc-text">强化</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/Matlab/M06/" title="M06 - 灰色关联分析 &amp; 灰色预测模型"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/liuguoxings/Pic@main/pics/20250805153725905.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="M06 - 灰色关联分析 &amp; 灰色预测模型"/></a><div class="content"><a class="title" href="/Matlab/M06/" title="M06 - 灰色关联分析 &amp; 灰色预测模型">M06 - 灰色关联分析 &amp; 灰色预测模型</a><time datetime="2022-08-03T16:00:00.000Z" title="发表于 2022-08-04 00:00:00">2022-08-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/YOLO/Y001/" title="Y001 第一章 深度学习经典检测方法概述"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/liuguoxings/Pic@main/pics/20250805153951001.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Y001 第一章 深度学习经典检测方法概述"/></a><div class="content"><a class="title" href="/YOLO/Y001/" title="Y001 第一章 深度学习经典检测方法概述">Y001 第一章 深度学习经典检测方法概述</a><time datetime="2022-08-02T16:00:00.000Z" title="发表于 2022-08-03 00:00:00">2022-08-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/JAVA/J04/" title="J04 - MongoDB的使用"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/liuguoxings/Pic@main/pics/20250805153036862.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="J04 - MongoDB的使用"/></a><div class="content"><a class="title" href="/JAVA/J04/" title="J04 - MongoDB的使用">J04 - MongoDB的使用</a><time datetime="2022-07-21T16:00:00.000Z" title="发表于 2022-07-22 00:00:00">2022-07-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/JAVA/J03/" title="J03 - Redis的使用"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/liuguoxings/Pic@main/pics/20250805153036862.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="J03 - Redis的使用"/></a><div class="content"><a class="title" href="/JAVA/J03/" title="J03 - Redis的使用">J03 - Redis的使用</a><time datetime="2022-07-20T16:00:00.000Z" title="发表于 2022-07-21 00:00:00">2022-07-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/GO/G05/" title="G05 - 数据类型"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/liuguoxings/Pic@main/pics/20250805153516280.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="G05 - 数据类型"/></a><div class="content"><a class="title" href="/GO/G05/" title="G05 - 数据类型">G05 - 数据类型</a><time datetime="2022-07-18T16:00:00.000Z" title="发表于 2022-07-19 00:00:00">2022-07-19</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2025 By <a class="footer-bar-link" href="/" title="LGX" target="_blank">LGX</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">108</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">20</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">10</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" href="https://liuguoxings.github.io/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/AOP/" style="font-size: 0.88rem;">AOP<sup>1</sup></a><a href="/tags/Go%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/" style="font-size: 0.88rem;">Go基础教程<sup>5</sup></a><a href="/tags/Machine-Learning/" style="font-size: 0.88rem;">Machine Learning<sup>63</sup></a><a href="/tags/Matlab/" style="font-size: 0.88rem;">Matlab<sup>5</sup></a><a href="/tags/MongoDB/" style="font-size: 0.88rem;">MongoDB<sup>1</sup></a><a href="/tags/Python%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/" style="font-size: 0.88rem;">Python基础教程<sup>4</sup></a><a href="/tags/Redis/" style="font-size: 0.88rem;">Redis<sup>1</sup></a><a href="/tags/SpringCache/" style="font-size: 0.88rem;">SpringCache<sup>1</sup></a><a href="/tags/YOLO/" style="font-size: 0.88rem;">YOLO<sup>1</sup></a><a href="/tags/%E4%BB%A3%E7%A0%81/" style="font-size: 0.88rem;">代码<sup>11</sup></a><a href="/tags/%E5%AE%9E%E9%AA%8C/" style="font-size: 0.88rem;">实验<sup>7</sup></a><a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" style="font-size: 0.88rem;">操作系统<sup>7</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 0.88rem;">数据结构<sup>11</sup></a><a href="/tags/%E6%97%A5%E5%BF%97%E5%88%87%E9%9D%A2/" style="font-size: 0.88rem;">日志切面<sup>1</sup></a><a href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" style="font-size: 0.88rem;">深度学习<sup>1</sup></a><a href="/tags/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B/" style="font-size: 0.88rem;">目标检测<sup>1</sup></a><a href="/tags/%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B/" style="font-size: 0.88rem;">系列教程<sup>5</sup></a><a href="/tags/%E7%BC%93%E5%AD%98%E6%B3%A8%E8%A7%A3/" style="font-size: 0.88rem;">缓存注解<sup>1</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/" style="font-size: 0.88rem;">计算机组成原理<sup>4</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" style="font-size: 0.88rem;">计算机网络<sup>3</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("04/01/2021 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2020 By 安知鱼 V1.6.14",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 LGX 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>